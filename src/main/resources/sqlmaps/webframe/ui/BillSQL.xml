<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.xiaoshabao.webframework.ui.entity.BillEntity">
	<sql id="billColumns"> 
		td_ui_bill.bill_id,td_ui_bill.bill_name,td_ui_bill.bill_class,td_ui_bill.order_no
		,td_ui_bill.state
	</sql>
	<sql id="listColumnsRef"> 
		${prefix}.list_id '${prefix}.list_id',${prefix}.list_name '${prefix}.list_name'
		,${prefix}.engine_type '${prefix}.engine_type',${prefix}.bill_id '${prefix}.bill_id'
		,${prefix}.tmplate_id '${prefix}.tmplate_id',${prefix}.report_id '${prefix}.report_id'
		,${prefix}.is_visible '${prefix}.is_visible',${prefix}.order_no '${prefix}.order_no'
		,${prefix}.col_count '${prefix}.col_count'
	</sql>
	<!--获得biiId对应的list单据-->
	<select id="getBillListDto" resultType="com.xiaoshabao.webframework.ui.dto.BillListDto">
		select 
			<include refid="billColumns" />,
    		<include refid="listColumns"><property name="${prefix}" value="list"/></include>
    	from td_ui_bill
    	inner join td_ui_list list
    	on td_ui_bill.bill_id=#{billId}
    		and td_ui_bill.bill_id=list.bill_id
	</select>
</mapper>